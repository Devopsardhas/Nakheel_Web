@{
    ViewData["Title"] = "Incident Investigation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
<link href="~/assets/css/font-awesome.css" rel="stylesheet" />
<link href="~/assets/css/frmwiz.css" rel="stylesheet" />
<style>
    .clstr {
        background: #f8f9fa !important;
        color: #545965 !important;
    }

    .labl {
        color: #00263a;
        font-size: 17px;
    }
</style>

<style>
    .floatBlock {
        margin: 0 1.81em 0 0;
    }

    .InjuredOptions_1 {
        border: none;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }

    .radioBtnClass {
        accent-color: #00263a !important;
    }

    .fieldsetbox {
        background: #f9f9f9;
        padding: 10px;
        border-radius: 11px;
        border: 1px solid #00263a;
    }

    .tblround {
        border-collapse: collapse;
        border-radius: 1em;
        overflow: hidden
    }

    .table > :not(caption) > * > * {
        padding: 0.35rem 0.35rem !important;
        background-color: var(--bs-table-bg);
        border-bottom-width: 1px;
        -webkit-box-shadow: inset 0 0 0 9999px var(--bs-table-accent-bg);
        box-shadow: inset 0 0 0 9999px var(--bs-table-accent-bg);
    }
</style>

<div class="row" id="List_View">
    <div class="col-xl-12">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-lg-10"> <h4 class="card-title">Incident Investigation List</h4></div>
                    <div class="col-lg-2" style="padding:13px"></div>
                </div>
            </div>
            <div class="card-body">
                <table id="tblIncidentInv" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                    <thead>
                        <tr>
                            <th>Incident ID</th>
                            <th>Inc Category</th>
                            <th>Inc Type</th>
                            <th>Zone</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="GetIncidentInvList">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row" id="Add_IncidentInvs_List" style="display:none">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-lg-10"> <h4 class="card-title">Add Investigation</h4></div>
                    <div class="col-lg-2">
                        <button type="button" id="btn_back" class="btn btn-success waves-effect waves-light" style="float: right;"><i class="mdi mdi-arrow-left-thin-circle-outline me-1"></i>Back</button>
                        <input type="hidden" id="bckval" value="0" />
                    </div>
                    <input type="hidden" id="Investigation_Id" value="0" />
                </div>
            </div>
            <div class="card-body" style="padding: 0.25rem 1.25rem !important;">
                <form id="msform" method="get" action="#" novalidate="novalidate" class="cmxform">
                    <div id="ViewIncidentList">
                    </div>
                    <div class="row" style="display:none">
                        <div class="col-md-6">
                            <label class="form-label">Total Man Days Lost *</label>
                            <input type="text" class="form-control" placeholder="Total Man Days Lost" name="Total_Man_Days" id="Total_Man_Days">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Involved Department/Contractor *</label>
                            @*<input type="text" class="form-control" placeholder="Involved Department/Contractor" name="Involved_Department_Contractor" id="Involved_Department_Contractor">*@
                            <select class="form-control EmpListName" name="Involved_Department_Contractor" id="Involved_Department_Contractor"></select>
                        </div>
                    </div>
                    <div class="row" style="display:none">
                        <label for="" class="col-md-12 col-form-label">Applicable Reports *</label>
                        <div id="paymentContainer" name="paymentContainer" class="InjuredOptions_1">
                            <div id="InjPolice" class="floatBlock">
                                <label for="Police"> <input id="Police" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="Police" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;Police </label>
                            </div>
                            <div id="InjMedical" class="floatBlock">
                                <label for="Medical"> <input id="Medical" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="Medical" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;Medical </label>
                            </div>
                            <div id="InjInvestigation" class="floatBlock">
                                <label for="Investigation"> <input id="Investigation" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="Investigation" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;Investigation report and Photos</label>
                            </div>
                            <div id="InjWitnessstatement" class="floatBlock">
                                <label for="Witnessstatement"> <input id="Witnessstatement" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="Witnessstatement" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;Witness Statement </label>
                            </div>
                            <div id="InjDCDReport" class="floatBlock">
                                <label for="DCDReport"> <input id="DCDReport" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="DCD_Report" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;DCD Report </label>
                            </div>
                            <div id="InjIPStatement " class="floatBlock">
                                <label for="IPStatement"> <input id="IPStatement" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="IP_Statement" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;IP Statement</label>
                            </div>
                            <div id="InjOther" class="floatBlock">
                                <label for="eOther"> <input id="eOther" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="Other" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;Others</label>
                            </div>
                            <div id="InjNoReports" class="floatBlock">
                                <label for="NoReports"> <input id="NoReports" class="radioBtnClass" name="ApplicableReports" type="checkbox" value="NoReports" onchange="Fn_ApplicableRpts(this.value)" />&nbsp;No Reports</label>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="display:none">
                        <br />
                        <div class="col-lg-12">
                            <label for="" class="col-md-12 col-form-label">Description of the main circumstances leading to the Incident: (Event Chronology and Outcome)</label>
                            <div class="col-md-12">
                                <textarea class="form-control" id="Description_circumstances" style="height: 107px;">  
                            </textarea>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-6" style="">
                            <div class="row"><div class="col-lg-10"> <h5 class="card-title">Applicable Reports <span class="requ">*</span></h5></div></div>
                            <br />
                            <table id="tblinveAttachments" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Document Type</th>
                                        <th>Yes/No</th>
                                        <th>Justification / Comments </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="clstr">
                                        <td>Police Report </td>
                                        <td>
                                            <input type="hidden" value="Police Report" class="clsTitle" />
                                            <input type="radio" name="policeReport" class="clsyes_no_1" onclick="FnPoilceReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="policeReport" class="clsyes_no_1" onclick="FnPoilceReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="policeReport" class="clsyes_no_1" onclick="FnPoilceReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>

                                        <td style="display:none;" class="Rem_1" id="PoliceReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_Police_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_1" placeholder="" id="example_PoliceReport1" name="txtPoliceReport1"></td>
                                        <td class="com_1" id="PoliceReport2" style="width: 45%;">
                                            <input type="file" class="form-control file_Upl_1" placeholder="" id="example_PoliceReport2" onchange="Applicalbe_Documents_File(this,'hdncls_Police_Documents_File','UploadPhots_1')" name="txtPoliceReport1" accept=".jpg,.png,.jpeg,.pdf">
                                            <div id="UploadPhots_1"></div>
                                        </td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>Medical Report </td>
                                        <td>
                                            <input type="hidden" value="Medical Report" class="clsTitle" />
                                            <input type="radio" name="MedicalReport" class="clsyes_no_2" onclick="FnMedicalReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="MedicalReport" class="clsyes_no_2" onclick="FnMedicalReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="MedicalReport" class="clsyes_no_2" onclick="FnMedicalReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_2" id="MedicalReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_Medical_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_2" placeholder="" id="example_MedicalReport1" name="txtMedicalReport1"></td>
                                        <td class="com_2" id="MedicalReport2" style="width: 45%;">
                                            <input type="file" class="form-control file_Upl_2" placeholder="" id="example_MedicalReport2" onchange="Applicalbe_Documents_File(this,'hdncls_Medical_Documents_File','UploadPhots_2')" name="txtMedicalReport1" accept=".jpg,.png,.jpeg,.pdf">
                                            <div id="UploadPhots_2"></div>
                                        </td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>Technical Report </td>
                                        <td>
                                            <input type="hidden" value="Technical Report" class="clsTitle" />
                                            <input type="radio" name="TechnicalReport" class="clsyes_no_3" onclick="FnTechnicalReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="TechnicalReport" class="clsyes_no_3" onclick="FnTechnicalReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="TechnicalReport" class="clsyes_no_3" onclick="FnTechnicalReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_3" id="TechnicalReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_Technical_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_3" placeholder="" id="example_TechnicalReport1" name="txtTechnicalReport1"></td>
                                        <td class="com_3" id="TechnicalReport2" style="width: 45%;"><input type="file" class="form-control file_Upl_3" placeholder="" id="example_TechnicalReport2" onchange="Applicalbe_Documents_File(this,'hdncls_Technical_Documents_File','UploadPhots_3')" name="TechnicalReport3" accept=".jpg,.png,.jpeg,.pdf"><div id="UploadPhots_3"></div></td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>DCD Report </td>
                                        <td>
                                            <input type="hidden" value="DCD Report" class="clsTitle" />
                                            <input type="radio" name="DCDReport" class="clsyes_no_4" onclick="FnDCDReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="DCDReport" class="clsyes_no_4" onclick="FnDCDReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="DCDReport" class="clsyes_no_4" onclick="FnDCDReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_4" id="DCDReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_DCD_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_4" placeholder="" id="example_DCDReport1" name="txtDCDReport1"></td>
                                        <td class="com_4" id="DCDReport2" style="width: 45%;"><input type="file" class="form-control file_Upl_4" placeholder="" id="example_DCDReport2" onchange="Applicalbe_Documents_File(this,'hdncls_DCD_Documents_File','UploadPhots_4')" name="txtDCDReport1" accept=".jpg,.png,.jpeg,.pdf"><div id="UploadPhots_4"></div></td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>Witness Statement </td>
                                        <td>
                                            <input type="hidden" value="Witness Statement" class="clsTitle" />
                                            <input type="radio" name="WitnessReport" class="clsyes_no_5" onclick="FnWitnessReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="WitnessReport" class="clsyes_no_5" onclick="FnWitnessReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="WitnessReport" class="clsyes_no_5" onclick="FnWitnessReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_5" id="WitnessReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_Witness_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_5" placeholder="" id="example_Witness1" name="txtWitness1"></td>
                                        <td class="com_5" id="WitnessReport2" style="width: 45%;"><input type="file" class="form-control file_Upl_5" placeholder="" id="example_Witness2" onchange="Applicalbe_Documents_File(this,'hdncls_Witness_Documents_File','UploadPhots_5')" name="txtWitness1" accept=".jpg,.png,.jpeg,.pdf"><div id="UploadPhots_5"></div></td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>IP Statement </td>
                                        <td>
                                            <input type="hidden" value="IP Statement" class="clsTitle" />
                                            <input type="radio" name="IPReport" class="clsyes_no_6" onclick="FnIPReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="IPReport" class="clsyes_no_6" onclick="FnIPReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="IPReport" class="clsyes_no_6" onclick="FnIPReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_6" id="IPReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_IP_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_6" placeholder="" id="example_IP1" name="txtIP1"></td>
                                        <td class="com_6" id="IPReport2" style="width: 45%;"><input type="file" class="form-control file_Upl_6" placeholder="" id="example_IP2" onchange="Applicalbe_Documents_File(this,'hdncls_IP_Documents_File','UploadPhots_6')" name="txtIP1" accept=".jpg,.png,.jpeg,.pdf"><div id="UploadPhots_6"></div></td>
                                    </tr>
                                    <tr class="clstr">
                                        <td>Others, Please Specify</td>
                                        <td>
                                            <input type="hidden" value="Others" class="clsTitle" />
                                            <input type="radio" name="OthersReport" class="clsyes_no_7" onclick="FnOthersReport(this.value)" style="vertical-align:inherit" value="Yes" /> Yes&nbsp;
                                            <input type="radio" name="OthersReport" class="clsyes_no_7" onclick="FnOthersReport(this.value)" style="vertical-align:inherit" value="No" /> No&nbsp;
                                            <input type="radio" name="OthersReport" class="clsyes_no_7" onclick="FnOthersReport(this.value)" style="vertical-align:inherit" value="NA" /> NA&nbsp;
                                        </td>
                                        <td style="display:none;" class="Rem_7" id="OthersReport1"><input type="hidden" id="hdnService_Appendix_A" class="hdncls_Others_Documents_File APPENDIX_A_Viewhide" /><input type="text" class="form-control clsRemarks comments_7" placeholder="" id="example_Others1" name="txtOthers1"></td>
                                        <td class="com_7" id="OthersReport2" style="width: 45%;"><input type="file" class="form-control file_Upl_7" placeholder="" id="example_Others2" onchange="Applicalbe_Documents_File(this,'hdncls_Others_Documents_File','UploadPhots_7')" name="txtOthers1" accept=".jpg,.png,.jpeg,.pdf"><div id="UploadPhots_7"></div></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-6" style="">
                            <div class="row"><div class="col-lg-10"> <h5 class="card-title">Other parties involved in the incident</h5></div></div>
                            <br />
                            <table id="tblOtherparties" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Role/Position</th>
                                        <th>Name</th>
                                        <th>Contact Number </th>
                                    </tr>
                                </thead>
                                <tbody id="GetIncidentList">
                                    <tr>
                                        <td>Supervisor</td>
                                        <td>
                                            <input type="hidden" value="Supervisor" class="clsRole" /><input type="text" class="form-control clsname OtherParties_1" id="OtherParties_1" />
                                        </td>
                                        <td><input type="text" class="form-control clsContactno numbersonly otherPartiesContact_1" maxlength="10" id="otherPartiesContact_1" /></td>
                                    </tr>
                                    <tr>
                                        <td>Manager</td>
                                        <td>
                                            <input type="hidden" value="Manager" class="clsRole" /> <input type="text" class="form-control clsname OtherParties_2" id="OtherParties_2" />
                                        </td>
                                        <td><input type="text" class="form-control clsContactno numbersonly otherPartiesContact_2" maxlength="10" id="otherPartiesContact_2" /></td>
                                    </tr>
                                    <tr>
                                        <td>Witness/(s)</td>
                                        <td><input type="hidden" value="Witness" class="clsRole" /> <input type="text" class="form-control clsname OtherParties_3" id="OtherParties_3" /></td>
                                        <td><input type="text" class="form-control clsContactno numbersonly otherPartiesContact_3" maxlength="10" id="otherPartiesContact_3" /></td>
                                    </tr>
                                    <tr>
                                        <td>Any Other</td>
                                        <td><input type="hidden" value="Other" class="clsRole" /> <input type="text" class="form-control clsname OtherParties_4" id="OtherParties_4" /></td>
                                        <td><input type="text" class="form-control clsContactno numbersonly otherPartiesContact_4" maxlength="10" id="otherPartiesContact_4" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row" style="display:none" id="divJustification">
                        <div class="col-lg-12">
                            <label for="" class="col-md-12 col-form-label">Justification / Comments *</label>
                            <div class="col-md-12">
                                <textarea class="form-control" name="Justification" id="Justification_Comments">  
                            </textarea>
                            </div>
                        </div>
                    </div>

                    <div class="row" style="display:none" id="divJApplicableUpload">
                        <div class="col-lg-12">
                            <label for="" class="col-md-12 col-form-label">Upload</label>
                            <div class="col-md-12">
                                <input type="file" />
                            </div>
                        </div>
                    </div>

                    <br />
                    <div class="row">
                        <div class="col-md-12 grid-margin stretch-card">
                            <div class="card">
                                <div class="card-body">
                                    <div><label style="font-size: 19px !important;">INCIDENT INVESTIGATION SUMMARY</label></div>
                                    <p>Fill All Form Field To Go To Next Step</p>
                                    <div class="row">
                                        <div class="col-md-12 mx-0">

                                            <!-- progressbar -->
                                            <ul id="progressbar">
                                                <li class="active msformprg" id="account"><strong>Incident Causes Details</strong></li>
                                                <li class="msformprg" id="personal"><strong>Injury Details</strong></li>
                                                <li class="msformprg" id="confirm"><strong>Additional Information</strong></li>
                                            </ul> <!-- fieldsets -->
                                            <fieldset id="individual_Application">
                                                <section>
                                                    <div class="mb-3 fieldsetbox">
                                                        <label for="example-number-input" class="col-md-4 col-form-label labl">Immediate Cause* (Unsafe Act):</label>
                                                        <div class="row" style="margin-left: 0%;">
                                                            <div id="UnsafeActList" style="display: contents;">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="mb-3 fieldsetbox">
                                                            <label for="example-number-input" class="col-md-4 col-form-label labl">Immediate Cause* (Unsafe Conditions):</label>
                                                            <div class="row" style="margin-left: 0%;">
                                                                <div id="UnsafeConditionList" style="display: contents;">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="mb-3 fieldsetbox">
                                                            <label for="example-number-input" class="col-md-4 col-form-label labl">Root Causes* (Personal Factor):</label>
                                                            <div class="row" style="margin-left: 0%;">
                                                                <div id="PersonalFactorList" style="display: contents;">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div>
                                                        <div class="mb-3 fieldsetbox">
                                                            <label for="example-number-input" class="col-md-4 col-form-label labl">Root Causes* (System Factor):</label>
                                                            <div class="row" style="margin-left: 0%;">
                                                                <div id="SystemFactorList" style="display: contents;">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                                <button type="submit" class="next action-button" value="1" style="float:right">Next Step</button>
                                            </fieldset>
                                            <fieldset>
                                                <section>
                                                    <div id="NO_Injury_Type" style="display:none">
                                                        <div>
                                                            <div class="mb-3">
                                                                <label for="example-number-input" class="col-md-12 col-form-label labl" style="text-align: center;font-size: 21px;">Is There Any Injury/Illness: No</label>
                                                                <div class="row" style="margin-left: 0%;">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="divbodyLocation" style="display:none">
                                                        <div>
                                                            <div class="mb-3 fieldsetbox">
                                                                <label for="example-number-input" class="col-md-4 col-form-label labl">Mechanism Of Injury/ Illness:</label>
                                                                <div class="row" style="margin-left: 0%;">
                                                                    <div id="MechanismInjuryList" style="display: contents;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <div class="mb-3 fieldsetbox">
                                                                <label for="example-number-input" class="col-md-4 col-form-label labl">Agency / Source Of Injury / Illness:</label>
                                                                <div class="row" style="margin-left: 0%;">
                                                                    <div id="AgencyInjuryList" style="display: contents;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="display:none">
                                                            <div class="col-2">
                                                                <div class="mb-4">
                                                                    <label for="formrow-firstname-input" class="form-label labl">Bodily Location:</label>
                                                                    <img src="~/assets/images/human.svg" alt="Body Maps" width="500" height="200" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div style="background: #f9fafa;padding: 10px;border-radius: 10px;display:none" id="Is_Environmental_Impact">
                                                        <div class="row">
                                                            <div class="mb-3">
                                                                <label for="formrow-firstname-input" class="form-label labl">Environmental Impact details (If Environment Incident)</label>
                                                            </div>
                                                            <div class="col-6">
                                                                <div class="mb-3 row">
                                                                    <label for="example-tel-input" class="col-md-4 col-form-label">Environmental Incident</label>
                                                                    <div class="col-md-8">
                                                                        <select class="form-control" name="EnvironmentalIncident" placeholder="This is a search placeholder" id="EnvironmentalIncidentId">
                                                                            <option selected>--Select Environmental Incident--</option>
                                                                            <option value="Chemical">Chemical</option>
                                                                            <option value="Gas">Gas</option>
                                                                            <option value="Oil">Oil</option>
                                                                            <option value="Hazard">Hazard</option>
                                                                            <option value="Wastewater_Disposal">Wastewater Disposal</option>
                                                                            <option value="Others">Others</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-6">
                                                                <div class="mb-3 row">
                                                                    <label for="example-tel-input" class="col-md-4 col-form-label">Cause Of Release</label>
                                                                    <div class="col-md-8">
                                                                        <select class="form-control" name="Cause_Of_Release" placeholder="This is a search placeholder" id="Cause_Of_Release">
                                                                            <option selected value="0">--Select Cause Of Release--</option>
                                                                            <option value="LOPC">LOPC(Lose of Primary Containment)</option>
                                                                            <option value="Human_Error">Human Error</option>
                                                                            <option value="Inadequate_Containment">Inadequate Containment</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <label for="" class="col-md-5 col-form-label">Impact Details</label>
                                                                <div class="col-md-12">
                                                                    <textarea class="form-control" id="Impact_Details" name="Impact_Details">
                                                                </textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br />
                                                    <div style="background: #f9fafa;padding: 10px;border-radius: 10px;display:none" id="Is_Security_Impact">
                                                        <div class="row">
                                                            <div class="mb-3">
                                                                <label for="formrow-firstname-input" class="form-label labl">Security Impact Details (If Security Incident)</label>
                                                            </div>
                                                            <div class="col-6">
                                                                <div class="mb-3 row">
                                                                    <label for="example-tel-input" class="col-md-4 col-form-label">Classification</label>
                                                                    <div class="col-md-8">
                                                                        <select class="form-control" id="ClassificationList" name="Classification" placeholder="This is a search placeholder" onchange="Fn_Classification(this.value)">
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-6">
                                                                <div class="mb-3 row">
                                                                    <label for="example-tel-input" class="col-md-4 col-form-label">Type of Security Incident</label>
                                                                    <div class="col-md-8">
                                                                        <select class="form-control" id="TypeSecurityIncidentList" name="Type_Security_Incident" placeholder="This is a search placeholder">
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <label for="" class="col-md-5 col-form-label">Impact Details</label>
                                                                <div class="col-md-12">
                                                                    <textarea class="form-control" id="Sec_ImpactDetails"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br />
                                                    </div>
                                                </section>
                                                <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                                <button type="submit" name="next" class="next action-button" value="2" style="float:right">Next Step</button>
                                            </fieldset>
                                            <fieldset>
                                                <section>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <label for="example-email-input" class="col-md-5 col-form-label labl">Additional Information: (Optional)</label>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control" id="Additional_Information"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br />
                                                    <div class="">
                                                        <div class="row">
                                                            <div class="col-lg-10"> <h5 class="card-title">Actions Taken Immediately After The Incident:</h5></div>
                                                            <div class="col-lg-2">
                                                                <button type="button" id="btn_add_incident" class="btn btn-success waves-effect waves-light" style="float: right;" onclick="FN_Add_ActionsTaken()"><i class="mdi mdi-plus me-1"></i> Add</button>
                                                            </div>
                                                        </div>
                                                        <br />
                                                        <table id="tblActions_Taken_Immediately" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                                                            <thead>
                                                                <tr>
                                                                    <th>Description Of The Actions</th>
                                                                    <th>Action Taken By</th>
                                                                    <th>Date Completed</th>
                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="GetActionTakenList">
                                                                <tr>
                                                                    <td>
                                                                        <input type="text" class="form-control clsDescriptionAction" name="ImmediatelyActionDescription" />
                                                                        <label id="txtImmediatelyActionDescription" style="color:red"> </label>
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control clsActiontakenby" name="ImmediatelyActionTaken" />
                                                                        <label id="txtImmediatelyActionTaken" style="color:red"> </label>
                                                                    </td>
                                                                    <td>
                                                                        <input type="date" class="form-control clsActionDate" name="ImmediatelyActionDate" />
                                                                        <label id="txtImmediatelyActionDate" style="color:red">
                                                                        </label>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <br />
                                                    <div class="">
                                                        <div class="row">
                                                            <div class="col-lg-10"> <h5 class="card-title">Incident Root Cause(s):</h5></div>
                                                            <div class="col-lg-2">
                                                                <button type="button" id="btn_add_incident" class="btn btn-success waves-effect waves-light" style="float: right;" onclick="FN_Add_IncidentRootCause()"><i class="mdi mdi-plus me-1"></i> Add</button>
                                                            </div>
                                                        </div>
                                                        <br />
                                                        <table id="tblIncidentRootCause" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                                                            <thead>
                                                                <tr>
                                                                    <th>Description</th>
                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="GetIncidentRootCauseList">
                                                                <tr>
                                                                    <td>
                                                                        <input type="text" class="form-control clsIncidentRootCause" name="IncidentRootCauseDes" />
                                                                        <label id="txtIncidentRootCause" style="color:red"></label>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <br />
                                                    <div class="">
                                                        <div class="row">
                                                            <div class="col-lg-10"> <h5 class="card-title">Corrective Actions to prevent Recurrence:</h5></div>
                                                            <div class="col-lg-2">
                                                                <button type="button" id="btn_add_incident" class="btn btn-success waves-effect waves-light" style="float: right;" onclick="FN_Add_Corrective_Actions()"><i class="mdi mdi-plus me-1"></i> Add</button>
                                                            </div>
                                                        </div>
                                                        <br />
                                                        <table id="tblCorrectiveAction" class="table table-striped dt-responsive nowrap tblround" style="width:100%">
                                                            <thead>
                                                                <tr>
                                                                    <th>Required Action</th>
                                                                    <th>Action Taken</th>
                                                                    <th>Priority (High/Low/Medium)</th>
                                                                    <th>Target Date / Completion Date</th>
                                                                    <th>Upload Evidence</th>
                                                                    <th>Action</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="GetCorrectiveActionList">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <label for="example-email-input" class="col-md-12 col-form-label labl">Risk Assessment & Environmental Impact Assessment Revised, And Staff Refresher Training Completed (As Applicable)</label>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control" id="Risk_Assessment_Impact"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <label for="example-email-input" class="col-md-12 col-form-label labl">Upload Evidence Of Risk Assessment & Training</label>
                                                            <div class="col-md-12">
                                                                <input type="hidden" id="hdnService_Appendix_A" class="hdncls_Evidence_Documents_File APPENDIX_A_Viewhide" />
                                                                <input type="file" class="form-control" id="Invs_File_Path" name="Invs_File_Path" onchange="Applicalbe_Documents_File(this,'hdncls_Evidence_Documents_File')" accept=".jpg,.jpeg,.png,.doc,.docx,.pdf" />
                                                                <div id="Inves_Evidence_Upl"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div style="display:none">
                                                        <table id="tblIncident" class="table table-striped dt-responsive nowrap" style="width:100%">
                                                            <thead>
                                                                <tr style="text-align: center;">
                                                                    <th colspan="4">DECLARATIONS AND APPROVALS - Not Needed</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="GetIncidentList">
                                                                <tr class="clstr">
                                                                    <td>Report Status</td>
                                                                    <td style="text-align: center;">
                                                                        <input class="form-check-input clsReportStatus" value="Closed" name="ReportStatus" type="radio" id="chkClosed">
                                                                        <label class="form-check-label" for="chkClosed">
                                                                            Closed – Completed
                                                                        </label>
                                                                    </td>
                                                                    <td style="text-align: center;" colspan="2">
                                                                        <input class="form-check-input clsReportStatus" value="Open" name="ReportStatus" type="radio" id="chkOpen">
                                                                        <label class="form-check-label" for="chkOpen">
                                                                            Open – Interim Report
                                                                        </label>
                                                                    </td>
                                                                </tr>
                                                                <tr class="clstr">
                                                                    <td>HSSE Representative</td>
                                                                    <td style="text-align: center;">
                                                                        <select class="form-control clsHSSERepresentative" name="choices-single-default" placeholder="This is a search placeholder">
                                                                            <option selected>--Select--</option>
                                                                            <option value="1">Representative 1</option>
                                                                            <option value="2">Representative 2</option>
                                                                            <option value="3">Representative 3</option>
                                                                        </select>
                                                                    </td>
                                                                    <td>Concerned Department Representative</td>
                                                                    <td style="text-align: center;">
                                                                        <select class="form-control clsDepartmentRepresentative" name="choices-single-default" placeholder="This is a search placeholder">
                                                                            <option value="0" selected>--Select--</option>
                                                                            <option value="1">Department Representative 1</option>
                                                                            <option value="2">Department Representative 2</option>
                                                                            <option value="3">Department Representative 3</option>
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                                <tr class="clstr">
                                                                    <td>Date </td>
                                                                    <td style="text-align: center;">
                                                                        <input type="date" id="D_ReportDate" class="form-control">
                                                                    </td>
                                                                    <td>Other Representative</td>
                                                                    <td style="text-align: center;">
                                                                        <select class="form-control clsOtherRepresentative" name="choices-single-default" placeholder="This is a search placeholder">
                                                                            <option value="0" selected>--Select--</option>
                                                                            <option value="1">Other Representative 1</option>
                                                                            <option value="2">Other Representative 2</option>
                                                                            <option value="3">Other Representative 3</option>
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </section>
                                                <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                                                <input type="button" name="make_payment" class="action-button" value="Confirm" id="btn_Confirm" style="float:right;cursor:pointer" />
                                            </fieldset>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row" id="View_IncidentInvs_List" style="display:none">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-lg-10"> <h4 class="card-title">View Investigation</h4></div>
                    <div class="col-lg-2">
                        <button type="button" id="btn_ViewIncback" class="btn btn-success waves-effect waves-light" style="float: right;"><i class="mdi mdi-arrow-left-thin-circle-outline me-1"></i>Back</button>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div id="ViewIncList">
                </div>
                <div id="ViewInvestigationList">
                </div>
            </div>
        </div>
    </div>
</div>

<div id="Loader" style="display: none;">
    <img src="@Url.Content("~/assets/images/loader.gif")" al alt="" />
</div>

<script src="~/assets/js/validation/investigation_validation/frmwizard.js"></script>
<script src="~/assets/js/validation/incident_validation/serversidedatatable.js"></script>

<script>
    $(document).on('click', '#btn_Confirm', function () {
        debugger
        if ($(".clsDescriptionAction").val() == "" || $(".clsActiontakenby").val() == "" || $(".clsActionDate").val() == ""
            || $(".clsIncidentRootCause").val() == "" || $(".clsDesCorrectiveAction").val() == "" ||
            $(".clsRiskMatrix").val() == "0" || $(".clsCorrectiveActionDate").val() == "") {
            $('#txtImmediatelyActionDescription').text("Enter Immediately Action Description");
            $('#txtImmediatelyActionTaken').text("Enter Immediately Action Taken by");
            $('#txtImmediatelyActionDate').text("Enter Immediately Action Date");
            $('#txtIncidentRootCause').text("Enter Incident Root Cause");
            $('#txtDescriptionCorrectiveAction').text("Enter Description Corrective Action");
            $('#txtCorrectiveActionPriority').text("Select Corrective Action Priority");
            $('#txtCorrectiveActionDate').text("Enter Corrective Action Date");
            return false;
        }
        if ($(".clsActiontakenby").val() == "") {
            $('#txtImmediatelyActionTaken').text("Enter Immediately Action Taken by");
            return false;
        }
        if ($(".clsActionDate").val() == "") {
            $('#txtImmediatelyActionDate').text("Enter Immediately Action Date");
            return false;
        }
        else {
            var OtherParties = [];
            var Unsafe_Act = [];
            var Unsafe_Conditions = [];
            var Personal_Factor = [];
            var System_Factor = [];
            var Mechanism_of_Injury = [];
            var Agency_Source_of_Injury = [];
            var Environmental_Impact_Value = [];
            var Security_Impact_Value = [];
            var Actions_Taken_Immediately = [];
            var Incident_Root_Cause = [];
            var Corrective_Actions = [];
            var Declarations_Approvals = [];
            var Inves_Attachements = [];
            var InjurPerson_List = [];

            var Injury_Type_List = [];
            var Nature_of_Injury = [];

            var Environmental_Impact_Element = {};
            var Security_Impact_Element = {};
            var Declarations_Approvals_Element = {};

            var cat_id = $("#txt_Inc_Category_Id").val();

            $('.clsInjury_Type:checked').each(function () {
                var varInc_Injury_Type_Id = "0";
                var varInc_Id = "0";
                var varInjury_Type_Id = $(this).val();
                var varRemarks = $("#txtInjury_Typeothers").val();

                var data = {};
                data.Inc_Injury_Type_Id = varInc_Injury_Type_Id;
                data.InjuredPersonName = varInc_Id;
                data.Injury_Type_Id = varInjury_Type_Id;
                data.Remarks = varRemarks;
                Injury_Type_List.push(data);
            });

            $('.clsInjury_Illness:checked').each(function () {
                var varInc_Nature_Injury_Id = "0";
                var varInc_Id = "0";
                var varNature_Injury_Id = $(this).val();
                var varRemarks = $("#txtInjury_Illnesseothers").val();

                var data = {};
                data.Inc_Nature_Injury_Id = varInc_Nature_Injury_Id;
                data.InjuredPersonName = varInc_Id;
                data.Nature_Injury_Id = varNature_Injury_Id;
                data.Remarks = varRemarks;
                Nature_of_Injury.push(data);
            });

            if (cat_id == "Environment") {
                Environmental_Impact_Element.Inves_Environmental_Id = '0';
                Environmental_Impact_Element.Investigation_Id = '0';
                Environmental_Impact_Element.Inc_Id = $("#Inv_Inc_Id").val();
                Environmental_Impact_Element.Environmental_Incident = $("#EnvironmentalIncidentId").val();
                Environmental_Impact_Element.Cause_Of_Release = $("#Cause_Of_Release").val();
                Environmental_Impact_Element.Impact_Details = $("#Impact_Details").val();
                Environmental_Impact_Value.push(Environmental_Impact_Element);
            }

            if (cat_id == "Security") {
                Security_Impact_Element.Inves_Security_Id = '0';
                Security_Impact_Element.Investigation_Id = '0';
                Security_Impact_Element.Inc_Id = $("#Inv_Inc_Id").val();
                Security_Impact_Element.Classification_Id = $("#ClassificationList").val();
                Security_Impact_Element.Type_of_Security_Incident_Id = $("#TypeSecurityIncidentList").val();
                Security_Impact_Element.Impact_Details = $("#Sec_ImpactDetails").val();
                Security_Impact_Value.push(Security_Impact_Element);
            }

            $('#tblOtherparties tbody > tr').each(function () {
                debugger
                var varRole = $(this).closest('tr').find('.clsRole').val();
                var varName = $(this).closest('tr').find('.clsname').val();
                var varContactno = $(this).closest('tr').find('.clsContactno').val();

                var data = {};
                data.Inves_Other_Parties_Id = "0";
                data.Investigation_Id = "0";
                data.Inc_Id = $("#Inv_Inc_Id").val();
                data.Role_Position = varRole;
                data.Other_Name = varName;
                data.Other_Contact_no = varContactno;
                OtherParties.push(data);
            });

            $('#tblIncidentInjuredPartsList tbody > tr').each(function () {
                debugger
                var varIs_Injury_Persons_Id = $(this).closest('tr').find('.Is_Injury_Persons_Id').text();
                var varInjuredPersonName = $(this).closest('tr').find('.Par_InjuredPersonName').text();
                var varInjuredPersonContactNo = $(this).closest('tr').find('.Par_InjuredPersonContactNo').text();
                var varInjuredBodyParts = $(this).closest('tr').find('.InjuredPersonbodyList').text();
                var varIs_Injury_PersonList = $(this).closest('tr').find('.Is_Injury_PersonList').text();
                var varTotal_man_days = $(this).closest('tr').find('.Total_man_days').val();
                var varCompany_Name = $(this).closest('tr').find('.Company_Name').val();
                var data = {};
                data.Persons_Name = varInjuredPersonName;
                data.Persons_ContactNo = varInjuredPersonContactNo;
                data.BodyParts_List = varInjuredBodyParts;
                data.Persons_Id = varIs_Injury_Persons_Id;
                data.Injured_Type = varIs_Injury_PersonList;
                data.Total_man_days = varTotal_man_days;
                data.Company_Name = varCompany_Name;
                InjurPerson_List.push(data);
            });

            $('.clsUnsafeAct:checked').each(function () {
                var varInves_Unsafe_Act_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtunsafeactothers").val();
                var varM_Unsafe_Act_Id = $(this).val();

                var data = {};
                data.Inves_Unsafe_Act_Id = varInves_Unsafe_Act_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_Unsafe_Act_Id = varM_Unsafe_Act_Id;
                data.Remarks = varRemarks;
                Unsafe_Act.push(data);
            });

            $('.clsUnsafeCond:checked').each(function () {
                var varInves_Unsafe_Cond_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtunsafeactoCondthers").val();
                var varM_Unsafe_Cond_Id = $(this).val();

                var data = {};
                data.Inves_Unsafe_Act_Id = varInves_Unsafe_Cond_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_Unsafe_Cond_Id = varM_Unsafe_Cond_Id;
                data.Remarks = varRemarks;
                Unsafe_Conditions.push(data);
            });

            $('.clsPersonalFactor:checked').each(function () {
                var varInves_RootCause_PF_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtPFothers").val();
                var varM_RootCause_PF_Id = $(this).val();

                var data = {};
                data.Inves_RootCause_PF_Id = varInves_RootCause_PF_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_RootCause_PF_Id = varM_RootCause_PF_Id;
                data.Remarks = varRemarks;
                Personal_Factor.push(data);
            });

            $('.clsSystemFactor:checked').each(function () {
                var varInves_RootCause_SF_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtSFothers").val();
                var varM_RootCause_SF_Id = $(this).val();

                var data = {};
                data.Inves_RootCause_SF_Id = varInves_RootCause_SF_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_RootCause_SF_Id = varM_RootCause_SF_Id;
                data.Remarks = varRemarks;
                System_Factor.push(data);
            });

            $('.clsMechanismInjury:checked').each(function () {
                var varInves_Mechanism_Injury_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtMechanismothers").val();
                var varM_Mechanism_InjuryIllness_Id = $(this).val();

                var data = {};
                data.Inves_Mechanism_Injury_Id = varInves_Mechanism_Injury_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_Mechanism_InjuryIllness_Id = varM_Mechanism_InjuryIllness_Id;
                data.Remarks = varRemarks;
                Mechanism_of_Injury.push(data);
            });

            $('.clsAgencyInjury:checked').each(function () {
                var varInves_AgencySource_Injury_Id = "0";
                var varInvestigation_Id = "0";
                var varInc_Id = $("#Inv_Inc_Id").val();
                var varRemarks = $("#txtAgencyothers").val();
                var varM_AgencySource_InjuryIllness_Id = $(this).val();

                var data = {};
                data.Inves_AgencySource_Injury_Id = varInves_AgencySource_Injury_Id;
                data.Investigation_Id = varInvestigation_Id;
                data.Inc_Id = varInc_Id;
                data.M_AgencySource_InjuryIllness_Id = varM_AgencySource_InjuryIllness_Id;
                data.Remarks = varRemarks;
                Agency_Source_of_Injury.push(data);
            });

            $('#tblActions_Taken_Immediately tbody > tr').each(function () {
                var varDescriptionAction = $(this).closest('tr').find('.clsDescriptionAction').val();
                var varActiontakenby = $(this).closest('tr').find('.clsActiontakenby').val();
                var varActionDate = $(this).closest('tr').find('.clsActionDate').val();

                var data = {};
                data.Inves_Action_Taken_Id = "0";
                data.Investigation_Id = "0";
                data.Inc_Id = $("#Inv_Inc_Id").val();
                data.Description_of_Actions = varDescriptionAction;
                data.Action_Taken_By = varActiontakenby;
                data.Date_Completed = varActionDate;
                Actions_Taken_Immediately.push(data);
            });

            $('#tblIncidentRootCause tbody > tr').each(function () {
                var varDescriptionAction = $(this).closest('tr').find('.clsIncidentRootCause').val();
                var data = {};
                data.Inves_Action_Taken_Id = "0";
                data.Investigation_Id = "0";
                data.Inc_Id = $("#Inv_Inc_Id").val();
                data.Root_Cause_Description = varDescriptionAction;
                Incident_Root_Cause.push(data);
            });

            $('#tblCorrectiveAction tbody > tr').each(function () {
                debugger
                var varDesCorrectiveAction = $(this).closest('tr').find('.clsDesCorrectiveAction').val();
                var varPersonResponsible = "0";
                var varRiskMatrix = $(this).closest('tr').find('.clsRiskMatrix').val();
                var varCorrectiveActionDate = $(this).closest('tr').find('.clsCorrectiveActionDate').val();

                var varCorrectiveAddAction = $(this).closest('tr').find('.clsAction_Taken').val();
                var varCorrectiveEvUpload = $(this).closest('tr').find('.Corrective_Actions_APPENDIX_A_Viewhide').val();

                var data = {};
                data.Inves_Action_Taken_Id = "0";
                data.Investigation_Id = "0";
                data.Inc_Id = $("#Inv_Inc_Id").val();
                data.Description_Actions = varDesCorrectiveAction;
                data.Person_Responsible = varPersonResponsible;
                data.Priority = varRiskMatrix;
                data.Target_Date = varCorrectiveActionDate;
                data.Action_Taken = varCorrectiveAddAction;
                data.Upload_Evidence = varCorrectiveEvUpload;
                Corrective_Actions.push(data);
            });

            var i = 1;
            $('#tblinveAttachments tbody > tr').each(function () {
                var Is_att = "";
                if ($("input[type='radio'].clsyes_no_" + i).is(':checked')) {
                    Is_att = $("input[type='radio'].clsyes_no_" + i + ":checked").val();
                }
                var varTitle = $(this).closest('tr').find('.clsTitle').val();
                var varIs_Attachements = Is_att;
                var varAttachements_Description = $(this).closest('tr').find('.clsRemarks').val();
                var varFile_Path = $(this).closest('tr').find('.APPENDIX_A_Viewhide').val();

                var data = {};
                data.Inves_Attachements_Id = "0";
                data.Inc_Id = $("#Inv_Inc_Id").val();
                data.Title = varTitle;
                data.Is_Attachements = varIs_Attachements;
                data.Attachements_Description = varAttachements_Description;
                data.File_Path = varFile_Path;
                Inves_Attachements.push(data);
                i++;
            });

            var Obj = {
                Investigation_Id: $("#Investigation_Id").val(),
                Inc_Id: $("#Inv_Inc_Id").val(),
                Is_Ref: $("input[type='radio'].clsReference:checked").val(),
                Total_Man_Days: $("#Total_Man_Days").val(),
                Involved_Department_Contractor: $("#Involved_Department_Contractor").val(),
                Description_circumstances: $("#Description_circumstances").val(),
                Applicable_Reports: $("input[type='radio'].radioBtnClass:checked").val(),
                Justification_Comments: $("#Justification_Comments").val(),
                Additional_Information: $("#Additional_Information").val(),
                Risk_Assessment_Environmental_Impact: $("#Risk_Assessment_Impact").val(),
                Invs_File_Path: $(".hdncls_Evidence_Documents_File").val(),
                L_Inves_Other_Parties_Involved: OtherParties,
                L_Inves_Immediate_Cause_Unsafe_Act: Unsafe_Act,
                L_Inves_Immediate_Cause_Unsafe_Cond: Unsafe_Conditions,
                L_Inves_Root_Cause_PF: Personal_Factor,
                L_Inves_Root_Cause_SF: System_Factor,
                L_Inves_Mechanism_InjuryIllness: Mechanism_of_Injury,
                L_Inves_AgencySource_InjuryIllness: Agency_Source_of_Injury,
                L_Inves_Environmental_Impact_Details: Environmental_Impact_Value,
                L_Inves_Security_Impact_Details: Security_Impact_Value,
                L_Inves_Actions_Taken_Immediately: Actions_Taken_Immediately,
                L_Inves_Incident_Root_Cause: Incident_Root_Cause,
                L_Inves_Corrective_Actions: Corrective_Actions,
                //L_Inves_Declarations_Approvals: Declarations_Approvals,
                L_Inves_Attachements: Inves_Attachements,
                L_M_Inc_Persons_Injured: InjurPerson_List,
                L_Inc_Inve_Injury_Type: Injury_Type_List,
                L_Inc_Inve_Nature_Injury: Nature_of_Injury,
            };
            $.ajax({
                url: "/Incident/AddIncidentInvestigation",
                type: "POST",
                cache: false,
                data: JSON.stringify(Obj),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data == "200") {
                        Swal.fire({
                            position: 'top-end',
                            icon: 'success',
                            title: 'Successfully',
                            showConfirmButton: false,
                            timer: 1500
                        }).then(function () {
                            window.location.reload();
                        });
                    }
                    else {
                        Swal.fire({
                            position: 'top-end',
                            icon: 'Error',
                            title: 'Error',
                            showConfirmButton: false,
                            timer: 1500
                        });
                    }
                },
            });
        }
    });
</script>

<script>
    "use strict";
    const UI_Fields2 = Object.freeze({
        ADD_INCIDENTINVS_LIST: "#Add_IncidentInvs_List",
        LIST_VIEW: "#List_View",
        BTN_BACK: "#btn_back",
        MAIN_TABLE: "#tblIncidentInv",
        TBODY_TABLE: "#GetIncidentInvList",
        BTN_ADD_INC: "#btn_add_incidentInv",
        VIEW_INCIDENT_LIST: "#ViewIncidentList",
        M_UNSAFE_ACT: "#UnsafeActList",
        M_UNSAFE_CONDITION: "#UnsafeConditionList",
        M_PERSONAL_FACTOR: "#PersonalFactorList",
        M_SYSTEM_FACTOR: "#SystemFactorList",
        M_MECHANISM_INJURY: "#MechanismInjuryList",
        M_AGENCY_INJURY: "#AgencyInjuryList",
        BODY_LOCATION: "#divbodyLocation",
        CLASSIFICATION_LIST: "#ClassificationList",
        TYPE_SECURITY_INCIDENT: "#TypeSecurityIncidentList",
        ADDMORE_ACTIONTAKEN_LIST: "#GetActionTakenList",
        TBL_DELETE_BUTTON: ".TblDeleteButton",
        ACTIONTAKEN_TABLE: "#tblActions_Taken_Immediately",
        ADDMORE_ROOT_CAUSE: "#GetIncidentRootCauseList",
        INCIDENT_ROOTCAUSE_TABLE: "#tblIncidentRootCause",
        TBLROOTCAUSE_DELETE_BUTTON: ".TblRootCauseDeleteButton",
        ADDMORE_CORRECTIVE_ACTION: "#GetCorrectiveActionList",
        INCIDENT_CORRECTIVEACTION_TABLE: "#tblCorrectiveAction",
        TBLCORRACTION_DELETE_BUTTON: ".TblCorrActionDeleteButton",
        VIEW_INCIDENTINVS_LIST: "#View_IncidentInvs_List",
        BTN_VIEWINVES_BACK: "#btn_ViewIncback",
        VIEW_INVESTIGATION_LIST: "#ViewInvestigationList",
        VIEW_INC_LIST: "#ViewIncList"
    });
     var key_nmew = 100;
    $(document).ready(function () {
        ServerSideTable_Investing();
        LOAD_UNSAFE_ACT();
        LOAD_UNSAFE_CONDITION();
        LOAD_PERSONAL_FACTOR();
        LOAD_SYSTEM_FACTOR();
        LOAD_MECHANISM_INJURY();
        LOAD_AGENCY_INJURY();
        LOAD_CLASSIFICATION();
        Load_Emp_List("All");

        $(UI_Fields2.BTN_BACK).click(function () {
            $(UI_Fields2.LIST_VIEW).show(100);
            $(UI_Fields2.ADD_INCIDENTINVS_LIST).hide(100);
            $(UI_Fields2.VIEW_INCIDENTINVS_LIST).hide(100);
            ClearAll();
        });

        $(UI_Fields2.BTN_VIEWINVES_BACK).click(function () {
            $(UI_Fields2.LIST_VIEW).show(100);
            $(UI_Fields2.ADD_INCIDENTINVS_LIST).hide(100);
            $(UI_Fields2.VIEW_INCIDENTINVS_LIST).hide(100);
            ClearAll();
        });
        $(UI_Fields2.ACTIONTAKEN_TABLE).on("click", UI_Fields2.TBL_DELETE_BUTTON, function () {
            $(this).closest("tr").remove();
        });

        $(UI_Fields2.INCIDENT_ROOTCAUSE_TABLE).on("click", UI_Fields2.TBLROOTCAUSE_DELETE_BUTTON, function () {
            $(this).closest("tr").remove();
        });

        $(UI_Fields2.INCIDENT_CORRECTIVEACTION_TABLE).on("click", UI_Fields2.TBLCORRACTION_DELETE_BUTTON, function () {
            $(this).closest("tr").remove();
        });

        $('input[name=ImmediatelyActionDescription]').change(function () {
            debugger
            $("#txtImmediatelyActionDescription").text('');
        });
        $('input[name=ImmediatelyActionTaken]').change(function () {
            debugger
            $("#txtImmediatelyActionTaken").text('');
        });
        $('input[name=ImmediatelyActionDate]').change(function () {
            debugger
            $("#txtImmediatelyActionDate").text('');
        });
        $('input[name=IncidentRootCauseDes]').change(function () {
            debugger
            $("#txtIncidentRootCause").text('');
        });

        $('input[name=DescriptionCorrectiveAction]').change(function () {
            debugger
            $("#txtDescriptionCorrectiveAction").text('');
        });
        $('select[name=CorrectiveActionPriority]').change(function () {
            debugger
            $("#txtCorrectiveActionPriority").text('');
        });
        $('input[name=CorrectiveActionDate]').change(function () {
            debugger
            $("#txtCorrectiveActionDate").text('');
        });
    });
</script>

<script>
    ApplySelect2CC("#Involved_Department_Contractor");

    function ApplySelect2CC(id) {
        $(id).select2({
            placeholder: "--Select--",
            theme: 'bootstrap-5',
        });
    }
    function Load_Emp_List(Role_Name) {
        $.ajax({
            url: '@Html.Raw(@Url.Action("LoadEmpbyRole", "CommonMaster"))',
            type: "POST",
            cache: false,
            async: false,
            data: { Role_Name: Role_Name },
            success: function (data) {
                $("#Involved_Department_Contractor").empty();
                $("#Involved_Department_Contractor").append("<option selected value='0' disabled>--Select Employee--</option>");
                if (data) {
                    $(data).each(function (i, e) {
                        $("#Involved_Department_Contractor").append("<option value=" + e.Employee_Identity_Id + ">" + e.First_Name + " / " + e.Email_Id + "</option>");
                    });
                    //$('#CC_Id').multiselect('rebuild');
                }
            },
        });
    }


    function Fn_ApplicableRpts(val) {
        debugger

        if (val == "NoReports") {
            $("#Police").prop('checked', false);
            $("#Medical").prop('checked', false)
            $("#Investigation").prop('checked', false)
            $("#Witnessstatement").prop('checked', false)
            $("#eOther").prop('checked', false)

            $("#divJustification").show();
            $("#divJApplicableUpload").hide();
        }
        else {
            $("#NoReports").prop('checked', false)
            $("#divJustification").hide();
            $("#divJApplicableUpload").show();
        }
    }

    function LOAD_UNSAFE_ACT() {
        $.post("@Url.Action("LoadUnsafeActList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_UNSAFE_ACT).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsUnsafeAct" type="checkbox" name="M_UnsafeActList" value="' + value.Unsafe_Act_Id + '" id="UNS_' + value.Unsafe_Act_Id + '">';
                    html += '<label class="form-check-label" id="UnsafeActname_' + value.Unsafe_Act_Id + '" for="UNS_' + value.Unsafe_Act_Id + '">' + value.Unsafe_Act_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsUnsafeAct clsUnsafeActoth" type="checkbox" onclick="FN_USA_OTHER(this.value)" name="M_UnsafeActList" value="0" id="UNS_0">';
                html += '<label class="form-check-label" for="UNS_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="USA_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtunsafeactothers" name="UnsafeActRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_UNSAFE_ACT).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_UNSAFE_ACT).append(html);
            }
        });
    }

    function FN_USA_OTHER(val) {

        if ($("input[type='checkbox'].clsUnsafeActoth").is(':checked')) {
            $("#USA_Oth").show()
        } else {
            $("#txtunsafeactothers").val('');
            $("#USA_Oth").hide()
        }
    }

    function LOAD_UNSAFE_CONDITION() {
        $.post("@Url.Action("LoadUnsafeConditionList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_UNSAFE_CONDITION).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsUnsafeCond" type="checkbox" name="M_UnsafeConditionList" value="' + value.Unsafe_Condition_Id + '" id="UNSC_' + value.Unsafe_Condition_Id + '">';
                    html += '<label class="form-check-label" id="UNSCID_' + value.Unsafe_Condition_Id + '" for="UNSC_' + value.Unsafe_Condition_Id + '">' + value.Unsafe_Condition_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsUnsafeCond clsUnsafecondoth" type="checkbox" onclick="FN_USC_OTHER(this.value)" name="M_UnsafeConditionList" value="0" id="UNC_0">';
                html += '<label class="form-check-label" for="UNC_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="USC_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtunsafeactoCondthers" name="UnsafeCondRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_UNSAFE_CONDITION).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_UNSAFE_CONDITION).append(html);
            }
        });
    }

    function FN_USC_OTHER(val) {
        if ($("input[type='checkbox'].clsUnsafecondoth").is(':checked')) {
            $("#USC_Oth").show()
        } else {
            $("#txtunsafeactoCondthers").val('');
            $("#USC_Oth").hide()
        }
    }
    function LOAD_PERSONAL_FACTOR() {
        $.post("@Url.Action("LoadPersonalfactorList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_PERSONAL_FACTOR).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsPersonalFactor" type="checkbox" name="PersonalFactorList" value="' + value.Personal_Factor_Id + '" id="PF_' + value.Personal_Factor_Id + '">';
                    html += '<label class="form-check-label" id="PF_ID_' + value.Personal_Factor_Id + '" for="PF_' + value.Personal_Factor_Id + '">' + value.Personal_Factor_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsPersonalFactor clsPFoth" type="checkbox" onclick="FN_PF_OTHER(this.value)" name="PersonalFactorList" value="0" id="PF_0">';
                html += '<label class="form-check-label" for="PF_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="PF_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtPFothers" name="PFRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_PERSONAL_FACTOR).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_PERSONAL_FACTOR).append(html);
            }
        });
    }

    function FN_PF_OTHER(val) {
        if ($("input[type='checkbox'].clsPFoth").is(':checked')) {
            $("#PF_Oth").show()
        } else {
            $("#txtPFothers").val('');
            $("#PF_Oth").hide()
        }
    }

    function LOAD_SYSTEM_FACTOR() {
        $.post("@Url.Action("LoadSystemfactorList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_SYSTEM_FACTOR).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsSystemFactor" type="checkbox" name="SystemFactorList" value="' + value.System_Factor_Id + '" id="SF_' + value.System_Factor_Id + '">';
                    html += '<label class="form-check-label" id="SF_ID_' + value.System_Factor_Id + '" for="SF_' + value.System_Factor_Id + '">' + value.System_Factor_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsSystemFactor clsSFoth" type="checkbox" onclick="FN_SF_OTHER(this.value)" name="SystemFactorList" value="0" id="SF_0">';
                html += '<label class="form-check-label" for="SF_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="SF_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtSFothers" name="SFRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_SYSTEM_FACTOR).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_SYSTEM_FACTOR).append(html);
            }
        });
    }

    function FN_SF_OTHER(val) {
        if ($("input[type='checkbox'].clsSFoth").is(':checked')) {
            $("#SF_Oth").show()
        } else {
            $("#txtSFothers").val('');
            $("#SF_Oth").hide()
        }
    }

    function LOAD_MECHANISM_INJURY() {
        $.post("@Url.Action("LoadMechanismOfInjuryList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_MECHANISM_INJURY).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsMechanismInjury" type="checkbox" name="MechanismInjuryList" value="' + value.Inc_Mechanism_Injury_Id + '" id="MIL_' + value.Inc_Mechanism_Injury_Id + '">';
                    html += '<label class="form-check-label" for="MIL_' + value.Inc_Mechanism_Injury_Id + '">' + value.Inc_Mechanism_Injury_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsMechanismInjury clsMechanismoth" type="checkbox" onclick="FN_MECHANISM_OTHER(this.value)" name="MechanismInjuryList" value="0" id="MIL_0">';
                html += '<label class="form-check-label" for="MIL_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="MIL_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtMechanismothers" name="MechanismRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_MECHANISM_INJURY).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_MECHANISM_INJURY).append(html);
            }
        });
    }

    function FN_MECHANISM_OTHER(val) {
        if ($("input[type='checkbox'].clsMechanismoth").is(':checked')) {
            $("#MIL_Oth").show()
        } else {
            $("#txtMechanismothers").val('');
            $("#MIL_Oth").hide()
        }
    }

    function LOAD_AGENCY_INJURY() {
        $.post("@Url.Action("LoadAgencyOfInjuryList","CommonMaster")", function (data) {
            if (data != null) {
                var html = "";
                $(UI_Fields2.M_AGENCY_INJURY).html('');
                //html += '<div class="col-md-4">';
                $.each(data, function (key, value) {
                    html += '<div class="col-md-4">';
                    html += '<div class="form-check mb-3">';
                    html += '<input class="form-check-input clsAgencyInjury" type="checkbox" name="AgencySourceInjuryList" value="' + value.Inc_Agency_Injury_Id + '" id="AGI_' + value.Inc_Agency_Injury_Id + '">';
                    html += '<label class="form-check-label" for="AGI_' + value.Inc_Agency_Injury_Id + '">' + value.Inc_Agency_Injury_Name + '</label>';
                    html += '</div>';
                    html += '</div>';
                });
                html += '<div class="col-md-4">';
                html += '<div class="form-check mb-3">';
                html += '<input class="form-check-input clsAgencyInjury clsAgencyoth" type="checkbox" onclick="FN_AGENCY_OTHER(this.value)" name="AgencySourceInjuryList" value="0" id="AGI_0">';
                html += '<label class="form-check-label" for="AGI_0">Others</label>';
                html += '</div>';
                html += '</div>';

                html += '<div class="col-md-4" style="display:none" id="AGI_Oth">';
                html += '<div class="">';
                html += '<input class="form-control"  type="text" id="txtAgencyothers" name="AgencyRemarks">';
                html += '</div>';
                html += '</div>';
                $(UI_Fields2.M_AGENCY_INJURY).append(html);
            }
            else {
                var html = "";
                $(UI_Fields2.M_AGENCY_INJURY).append(html);
            }
        });
    }

    function FN_AGENCY_OTHER(val) {
        if ($("input[type='checkbox'].clsAgencyoth").is(':checked')) {
            $("#AGI_Oth").show()
        } else {
            $("#txtAgencyothers").val('');
            $("#AGI_Oth").hide()
        }
    }

    function LOAD_CLASSIFICATION() {
        $.post("@Url.Action("LoadClassificationList", "CommonMaster")", function (data) {
            $(UI_Fields2.CLASSIFICATION_LIST).empty();
            $(UI_Fields2.CLASSIFICATION_LIST).append("<option selected value='0'  disabled> --Select Classification--</option>");
            $(data).each(function (i, e) {
                $(UI_Fields2.CLASSIFICATION_LIST).append("<option value=" + e.Classification_Id + ">" + e.Classification_Name + "</option>");
            });
        });
    }

    function Fn_Classification(Classification_Id) {
        $.post("@Url.Action("LoadTypeofSecurityIncident", "CommonMaster")", { Classification_Id: Classification_Id }, function (data) {
            $(UI_Fields2.TYPE_SECURITY_INCIDENT).empty();
            $(UI_Fields2.TYPE_SECURITY_INCIDENT).append("<option selected value='0' disabled> --Select Incident Type--</option>");
            $(data).each(function (i, e) {
                $(UI_Fields2.TYPE_SECURITY_INCIDENT).append("<option value=" + e.Inc_Type_Security_Id + ">" + e.Inc_Type_Security_Name + "</option>");
            });
        });
    }

    function FN_Add_ActionsTaken() {
        var html = "";
        html += '<tr><td><input type="hidden" class="BuildingID" value="0"/><input type="text" class="form-control clsDescriptionAction" name="Building_Name" /></td>';
        html += '<td><input type="text" class="form-control clsActiontakenby" name=Building_Description/></td>';
        html += '<td><input type="date" class="form-control clsActionDate" name=Building_Description/></td>';
        html += '<td><button type="button" class="btn btn-danger TblDeleteButton">Remove</button></td></tr>';
        $(UI_Fields2.ADDMORE_ACTIONTAKEN_LIST).append(html);
    }

    function FN_Add_IncidentRootCause() {
        var html = "";
        html += '<tr><td><input type="hidden" class="BuildingID" value="0"/><input type="text" class="form-control clsIncidentRootCause" name="Building_Name" /></td>';
        html += '<td><button type="button" class="btn btn-danger TblRootCauseDeleteButton">Remove</button></td></tr>';
        $(UI_Fields2.ADDMORE_ROOT_CAUSE).append(html);
    }

  
    function FN_Add_Corrective_Actions() {
        debugger;
        var hdn_filename = "hdncls_UploadEvidence_Documents_File_" + key_nmew;
        var html = "";
        html += '<tr><td><input type="hidden" class="BuildingID" value="0"/><input type="text" class="form-control clsDesCorrectiveAction" name="Building_Name" value=""/></td>';
        html += '<td><textarea class="form-control clsAction_Taken" id="" spellcheck="false"></textarea></td>';
        html += '<td><select class="form-control clsRiskMatrix" name="choices-single-default" placeholder="This is a search placeholder"> <option selected>--Select--</option><option value="High">High</option><option value="Low">Low</option><option value="Medium">Medium</option></select></td>';
        html += '<td><input type="date" class="form-control clsCorrectiveActionDate" name=Building_Description/></td>';
        html += '<td><input type="hidden" id="hdnService_Appendix_A" class="' + hdn_filename + ' Corrective_Actions_APPENDIX_A_Viewhide" /><input type="file" class="form-control" id="Invs_File_Path" name="Invs_File_Path" onchange="Applicalbe_Documents_File(this,' + "'" + hdn_filename + "'" + ')" accept=".jpg,.jpeg,.png,.doc,.docx,.pdf" /></td>';
        html += '<td><button type="button" class="btn btn-danger TblCorrActionDeleteButton">Remove</button></td></tr>';
        $(UI_Fields2.ADDMORE_CORRECTIVE_ACTION).append(html);
        key_nmew++;
    }
</script>

<script>
    function FnPoilceReport(val) {
        $("#example_PoliceReport1").val('');
        $("#example_PoliceReport2").val('');
        if (val == "Yes") {
            $("#PoliceReport1").css("display", "none");
            $("#PoliceReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#PoliceReport1").removeAttr('style');
            $("#PoliceReport2").css("display", "none");
        }
        else {
            $("#PoliceReport1").removeAttr('style');
            $("#PoliceReport2").css("display", "none");
        }
    }

    function FnMedicalReport(val) {
        $("#example_MedicalReport1").val('');
        $("#example_MedicalReport2").val('');
        if (val == "Yes") {
            $("#MedicalReport1").css("display", "none");
            $("#MedicalReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#MedicalReport1").removeAttr('style');
            $("#MedicalReport2").css("display", "none");
        }
        else {
            $("#MedicalReport1").removeAttr('style');
            $("#MedicalReport2").css("display", "none");
        }
    }

    function FnTechnicalReport(val) {
        $("#example_TechnicalReport1").val('');
        $("#example_TechnicalReport2").val('');
        if (val == "Yes") {
            $("#TechnicalReport1").css("display", "none");
            $("#TechnicalReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#TechnicalReport1").removeAttr('style');
            $("#TechnicalReport2").css("display", "none");
        }
        else {
            $("#TechnicalReport1").removeAttr('style');
            $("#TechnicalReport2").css("display", "none");
        }
    }

    function FnDCDReport(val) {
        $("#example_DCDReport1").val('');
        $("#example_DCDReport2").val('');
        if (val == "Yes") {
            $("#DCDReport1").css("display", "none");
            $("#DCDReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#DCDReport1").removeAttr('style');
            $("#DCDReport2").css("display", "none");
        }
        else {
            $("#DCDReport1").removeAttr('style');
            $("#DCDReport2").css("display", "none");
        }
    }

    function FnWitnessReport(val) {
        $("#example_Witness1").val('');
        $("#example_Witness2").val('');
        if (val == "Yes") {
            $("#WitnessReport1").css("display", "none");
            $("#WitnessReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#WitnessReport1").removeAttr('style');
            $("#WitnessReport2").css("display", "none");
        }
        else {
            $("#WitnessReport1").removeAttr('style');
            $("#WitnessReport2").css("display", "none");
        }
    }

    function FnIPReport(val) {
        $("#example_IP1").val('');
        $("#example_IP2").val('');
        if (val == "Yes") {
            $("#IPReport1").css("display", "none");
            $("#IPReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#IPReport1").removeAttr('style');
            $("#IPReport2").css("display", "none");
        }
        else {
            $("#IPReport1").removeAttr('style');
            $("#IPReport2").css("display", "none");
        }
    }

    function FnOthersReport(val) {
        $("#example_Others1").val('');
        $("#example_Others2").val('');
        if (val == "Yes") {
            $("#OthersReport1").css("display", "none");
            $("#OthersReport2").removeAttr('style');
        }
        else if (val == "No") {
            $("#OthersReport1").removeAttr('style');
            $("#OthersReport2").css("display", "none");
        }
        else {
            $("#OthersReport1").removeAttr('style');
            $("#OthersReport2").css("display", "none");
        }
    }
</script>

<script>
    function Applicalbe_Documents_File(val, clsname, PhotoId) {
        readImage(val, clsname);
        $("#" + PhotoId).hide();
    }
    function readImage(input, clsname) {
        if (input.files && input.files[0]) {
            var FR = new FileReader();
            FR.onload = function (e) {
                $.post("@Url.Action("FiletoDataApplicableReports", "Incident")", { FileData: e.target.result }, function (data) {
                    var cls = "." + clsname;
                    $(cls).val(data);
                }).always(function () {
                    $("#Loaderbck").hide();
                    $("#Loader").hide();
                });
            };
            FR.readAsDataURL(input.files[0]);
        }
    }
</script>

